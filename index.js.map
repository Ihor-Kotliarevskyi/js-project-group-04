{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/products-api.js","../src/js/helpers.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["// Обʼєкт refs з посиланнями на елементи ДОМ.\n\nconst refs = {\n  categories: document.querySelector('#categories'),\n  products: document.querySelector('#products'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  loader: document.querySelector('.loader'),\n  feedbackCardList: document.querySelector('.feedback-card-list'),\n  feedbackNavPrev: document.querySelector('.feedback-nav-prev'),\n  feedbackNavNext: document.querySelector('.feedback-nav-next'),\n};\n\nexport default refs;\n","// Функції для відображення елементів інтерфейсу.\nimport refs from './refs';\nimport Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\n\nexport function renderCategories(arrey) {\n  const categories = [{ _id: 'all', name: 'Всі товари' }, ...arrey];\n\n  const murkup = categories\n    .map(\n      ({ _id, name: catName }) => `<li\n        class=\"category-item\" id=\"${_id}\"\n        style=\"\n          background-image: image-set(\n            url('./furniture-bg/${_id}.png') 1x,\n            url('./furniture-bg/${_id}@2x.png') 2x\n          );\n        \"\n      ><button class=\"categories-btn\" type=\"button\">${catName}</button></li>`\n    )\n    .join('');\n  refs.categories.innerHTML = murkup;\n}\n\nexport function renderFurnitures(arrey) {\n  const markup = arrey\n    .map(\n      ({ _id, name, images, price, color }) => `<li class=\"product-item\">\n        <img\n          class=\"products-image\"\n          src='${images[0]}'\n          alt=\"${name}\"\n        />\n        <div class=\"product-description-box\">\n          <h4 class=\"products-title\">${name}</h4>\n          <ul class=\"products-color-list\">\n            <li class=\"products-color-box\" style=\"background-color: ${color[0]}\"></li>\n            <li class=\"products-color-box\" style=\"background-color: ${color[1]}\"></li>\n            <li\n              class=\"products-color-box\"\n              style=\"background-color: ${color[2]}\"\n            ></li>\n          </ul>\n          <p class=\"products-price\">${price} грн</p>\n        </div>\n        <button class=\"products-details-btn\" type=\"button\">Детальніше</button>\n      </li>`\n    )\n    .join('');\n  refs.products.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearFurnitures() {\n  refs.products.innerHTML = '';\n}\n\nnew Accordion('.accordion-container', {\n  duration: 300,\n  showMultiple: false,\n});\n","//API ендпоінти:\n\nexport const BASE_URL = 'https://furniture-store-v2.b.goit.study/api';\nexport const API_ENDPOINTS = {\n  FURNITURES: '/furnitures',\n  CATEGORIES: '/categories',\n  FEEDBACKS: '/feedbacks',\n  ORDERS: '/orders',\n};\nexport const FURNITURE_PAGE = 1;\nexport const FURNITURE_LIMIT = 8;\n\nexport const FEEDBACK_PAGE = 1;\nexport const FEEDBACK_LIMIT = 10;\n\nexport const getFurnitureByIdEndpoint = id => `/furnitures/${id}`;\n","// Функції для запитів на бекенд.\nimport axios from 'axios';\nimport {\n  BASE_URL,\n  API_ENDPOINTS,\n  getFurnitureByIdEndpoint,\n  FURNITURE_PAGE,\n  FURNITURE_LIMIT,\n  FEEDBACK_PAGE,\n  FEEDBACK_LIMIT,\n} from './constants.js';\n\naxios.defaults.baseURL = BASE_URL;\n\n// Functions for Furnitures\nexport async function getFurnitures(currentPage = 1) {\n  const { data } = await axios(\n    `${API_ENDPOINTS.FURNITURES}?page=${currentPage}&limit=${FURNITURE_LIMIT}`\n  );\n  return data;\n}\n\nexport async function getFurnituresByCategories(categoryId, currentPage) {\n  const { data } = await axios(\n    `${API_ENDPOINTS.FURNITURES}?page=${currentPage}&limit=${FURNITURE_LIMIT}&category=${categoryId}`\n  );\n  return data;\n}\n\n// Furniture by Id\nexport async function getFurnitureByID(id) {\n  const endpoint = getFurnitureByIdEndpoint(id);\n  const response = await axios.get(endpoint);\n  const furnitureItem = response.data;\n  return furnitureItem; // один обєкт меблів\n}\n\n// Functions for Categories\nexport async function getCategories() {\n  const response = await axios.get(API_ENDPOINTS.CATEGORIES);\n  const categoriesData = response.data;\n  return categoriesData; // масив категорій\n}\n\n// Feedbacks\nexport async function getFeedbacks(\n  params = { page: FEEDBACK_PAGE, limit: FEEDBACK_LIMIT }\n) {\n  const response = await axios.get(API_ENDPOINTS.FEEDBACKS, { params });\n  const feedbackData = response.data;\n  return feedbackData;\n}\n\n// Orders\nexport async function createOrder(orderData) {\n  const response = await axios.post(API_ENDPOINTS.ORDERS, orderData);\n  const createOrder = response.data;\n  return createOrder;\n}\n","// Допоміжні функції, які знадобляться для реалізації завдання (показ повідомлень, кнопок, лоадерів)\n\nimport refs from './refs';\n\nexport function showLoadMoreBtn() {\n  setTimeout(() => {\n    refs.loadMoreBtn.classList.add('is-show');\n  }, 500);\n}\n\nexport function hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('is-show');\n}\n","// Хендлери, які передаються в addEventListener.\n\nimport {\n  clearFurnitures,\n  renderCategories,\n  renderFurnitures,\n} from './render-function';\nimport {\n  getFurnitures,\n  getFurnitureByID,\n  getCategories,\n  getFeedbacks,\n  createOrder,\n  getFurnituresByCategories,\n} from './products-api.js';\n\nimport {\n  FURNITURE_PAGE,\n  FURNITURE_LIMIT,\n  FEEDBACK_PAGE,\n  FEEDBACK_LIMIT,\n} from './constants.js';\nimport refs from './refs.js';\nimport { hideLoadMoreBtn, showLoadMoreBtn } from './helpers.js';\n\nlet currentPage = 1;\nlet currentCategory = '';\n\nexport async function initialHome() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n\n    currentCategory = 'all';\n    const allCategoryItem = refs.categories.children[0];\n    allCategoryItem.classList.add('categories-item--active');\n\n    // showLoader();\n    const { furnitures } = await getFurnitures();\n    renderFurnitures(furnitures);\n    showLoadMoreBtn();\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\nexport async function handlerClickCategory(event) {\n  const item = event.target.closest('.category-item');\n  if (!item) {\n    return;\n  }\n\n  const categoriesChildrenArrey = [...event.currentTarget.children];\n\n  categoriesChildrenArrey.map(child => {\n    child.classList.remove('categories-item--active');\n  });\n\n  clearFurnitures();\n  item.classList.add('categories-item--active');\n  currentPage = 1;\n  currentCategory = item.id;\n\n  // showLoader();\n  try {\n    if (currentCategory === 'all') {\n      const { furnitures } = await getFurnitures();\n      renderFurnitures(furnitures);\n      showLoadMoreBtn();\n    } else {\n      const { furnitures, totalItems } = await getFurnituresByCategories(\n        currentCategory,\n        currentPage\n      );\n      if (!furnitures.length) {\n        hideLoadMoreBtn();\n        // showInfo('Not found');\n        return;\n      } else {\n        if (totalItems < FURNITURE_LIMIT) {\n          hideLoadMoreBtn();\n          // showInfo('End collections');\n        }\n        renderFurnitures(furnitures);\n      }\n    }\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\nexport async function onLoadMoreClick(event) {\n  event.preventDefault();\n  currentPage++;\n  // showLoader();\n\n  try {\n    if (currentCategory === 'all') {\n      const { furnitures, totalItems } = await getFurnitures(currentPage);\n      if (totalItems < FURNITURE_LIMIT * currentPage) {\n        hideLoadMoreBtn();\n        // showInfo('End collections');\n      } else {\n        showLoadMoreBtn();\n      }\n      renderFurnitures(furnitures);\n    } else {\n      const { furnitures, totalItems } = await getFurnituresByCategories(\n        currentCategory,\n        currentPage\n      );\n\n      if (!furnitures.length) {\n        hideLoadMoreBtn();\n        // showInfo('Not found');\n        return;\n      } else {\n        if (totalItems < FURNITURE_LIMIT) {\n          hideLoadMoreBtn();\n          // showInfo('End collections');\n        }\n        renderFurnitures(furnitures);\n      }\n    }\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\n// // furniture\n// export async function loadFurnitures(\n//   params = { page: FURNITURE_PAGE, limit: FURNITURE_LIMIT }\n// ) {\n//   try {\n//     const data = await getFurnitures(params);\n//     console.log('Furnitures:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Furnitures downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadFurnitureById(id) {\n//   try {\n//     const data = await loadFurnitureById(id);\n//     console.log('Furniture details:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Furniture id downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadCategories() {\n//   try {\n//     const data = await loadCategories();\n//     console.log('Categories:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Categories downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadFeedbacks(\n//   params = { page: FEEDBACK_PAGE, limit: FEEDBACK_LIMIT }\n// ) {\n//   try {\n//     const data = await loadFeedbacks(params);\n//     console.log('Feedbacks', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Feedbacks downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function sendOrder() {\n//   try {\n//     const data = await sendOrder();\n//     console.log('Order created:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Creating order error:', error);\n//     return null;\n//   }\n// }\n","import {\n  handlerClickCategory,\n  initialHome,\n  onLoadMoreClick,\n} from './js/handlers';\nimport refs from './js/refs';\n\ndocument.addEventListener('DOMContentLoaded', initialHome);\nrefs.categories.addEventListener('click', handlerClickCategory);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["refs","renderCategories","arrey","murkup","_id","catName","renderFurnitures","markup","name","images","price","color","clearFurnitures","Accordion","BASE_URL","API_ENDPOINTS","FURNITURE_LIMIT","axios","getFurnitures","currentPage","data","getFurnituresByCategories","categoryId","getCategories","showLoadMoreBtn","hideLoadMoreBtn","currentCategory","initialHome","categories","furnitures","handlerClickCategory","event","item","child","totalItems","onLoadMoreClick"],"mappings":"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"}