{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/products-api.js","../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["// Обʼєкт refs з посиланнями на елементи ДОМ.\n\nconst refs = {\n  categories: document.querySelector('#categories'),\n  products: document.querySelector('#products'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  colorBox: document.querySelector('.products-color-list'),\n  loader: document.querySelector('.loader'),\n  feedbackCardList: document.querySelector('.feedback-card-list'),\n  feedbackNavPrev: document.querySelector('.feedback-nav-prev'),\n  feedbackNavNext: document.querySelector('.feedback-nav-next'),\n};\n\nexport default refs;\n","// Функції для відображення елементів інтерфейсу.\nimport refs from './refs';\nimport Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\nimport '../css/faq.css';\n\nexport function renderCategories(arrey) {\n  const categories = [{ _id: 'all', name: 'Всі товари' }, ...arrey];\n\n  const murkup = categories\n    .map(\n      ({ _id, name: catName }) => `<li\n        class=\"category-item\" id=\"${_id}\"\n        style=\"\n          background-image: image-set(\n            url('./furniture-bg/${_id}.png') 1x,\n            url('./furniture-bg/${_id}@2x.png') 2x\n          );\n        \"\n      ><button class=\"categories-btn\" type=\"button\">${catName}</button></li>`\n    )\n    .join('');\n  refs.categories.innerHTML = murkup;\n}\n\nexport function renderFurnitures(arrey) {\n  const markup = arrey\n    .map(\n      ({\n        _id,\n        name,\n        images,\n        price,\n        color,\n      }) => `<li class=\"product-item\" data-id=\"${_id}\">\n        <img\n          class=\"products-image\"\n          src='${images[0]}'\n          alt=\"${name}\"\n        />\n        <div class=\"product-description-box\">\n          <h4 class=\"products-title\">${name}</h4>\n          <ul class=\"products-color-list\">\n            ${color\n              .map(\n                hex =>\n                  `<li class=\"products-color-box\" style=\"background-color: ${hex}\"></li>`\n              )\n              .join('')}\n          </ul>\n          <p class=\"products-price\">${price} грн</p>\n        </div>\n        <button class=\"products-details-btn\" type=\"button\">Детальніше</button>\n      </li>`\n    )\n    .join('');\n  refs.products.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearFurnitures() {\n  refs.products.innerHTML = '';\n}\n\n\n    new Accordion('.accordion-container', {\n      duration: 300,\n      showMultiple: false,\n    });\n  \n","//API ендпоінти:\n\nexport const BASE_URL = 'https://furniture-store-v2.b.goit.study/api';\nexport const API_ENDPOINTS = {\n  FURNITURES: '/furnitures',\n  CATEGORIES: '/categories',\n  FEEDBACKS: '/feedbacks',\n  ORDERS: '/orders',\n};\nexport const FURNITURE_PAGE = 1;\nexport const FURNITURE_LIMIT = 8;\n\nexport const FEEDBACK_PAGE = 1;\nexport const FEEDBACK_LIMIT = 10;\n\nexport const getFurnitureByIdEndpoint = id => `/furnitures/${id}`;\n","// Функції для запитів на бекенд.\nimport axios from 'axios';\nimport {\n  BASE_URL,\n  API_ENDPOINTS,\n  getFurnitureByIdEndpoint,\n  FURNITURE_PAGE,\n  FURNITURE_LIMIT,\n  FEEDBACK_PAGE,\n  FEEDBACK_LIMIT,\n} from './constants.js';\n\naxios.defaults.baseURL = BASE_URL;\n\n// Functions for Furnitures\nexport async function getFurnitures(currentPage = 1) {\n  const { data } = await axios(\n    `${API_ENDPOINTS.FURNITURES}?page=${currentPage}&limit=${FURNITURE_LIMIT}`\n  );\n  return data;\n}\n\nexport async function getFurnituresByCategories(categoryId, currentPage) {\n  const { data } = await axios(\n    `${API_ENDPOINTS.FURNITURES}?page=${currentPage}&limit=${FURNITURE_LIMIT}&category=${categoryId}`\n  );\n  return data;\n}\n\n// Furniture by Id\nexport async function getFurnitureByID(id) {\n  const endpoint = getFurnitureByIdEndpoint(id);\n  const response = await axios.get(endpoint);\n  const furnitureItem = response.data;\n  return furnitureItem;\n}\n\n// Functions for Categories\nexport async function getCategories() {\n  const response = await axios.get(API_ENDPOINTS.CATEGORIES);\n  const categoriesData = response.data;\n  return categoriesData;\n}\n\n// Feedbacks\nexport async function getFeedbacks(\n  params = { page: FEEDBACK_PAGE, limit: FEEDBACK_LIMIT }\n) {\n  const response = await axios.get(API_ENDPOINTS.FEEDBACKS, { params });\n  const feedbackData = response.data;\n  return feedbackData;\n}\n\n// Orders\nexport async function createOrder(orderData) {\n  const response = await axios.post(API_ENDPOINTS.ORDERS, orderData);\n  const createOrder = response.data;\n  return createOrder;\n}\n\n// // Functions for Furnitures\n// export async function getFurnitures(currentPage = 1) {\n//   const { data } = await axios.get(API_ENDPOINTS.FURNITURES, {\n//     params: {\n//       page: currentPage,\n//       limit: FURNITURE_LIMIT,\n//     },\n//   });\n//   return data;\n// }\n\n// export async function getFurnituresByCategories(categoryId, currentPage) {\n//   const { data } = await axios.get(API_ENDPOINTS.FURNITURES, {\n//     params: {\n//       page: currentPage,\n//       limit: FURNITURE_LIMIT,\n//       category: categoryId,\n//     },\n//   });\n//   return data;\n// }\n\n// // Furniture by Id\n// export async function getFurnitureByID(id) {\n//   const endpoint = getFurnitureByIdEndpoint(id);\n//   const { data } = await axios.get(endpoint);\n//   return data;\n// }\n\n// // Functions for Categories\n// export async function getCategories() {\n//   const { data } = await axios.get(API_ENDPOINTS.CATEGORIES);\n//   return data;\n// }\n\n// // Feedbacks\n// export async function getFeedbacks(\n//   params = { page: FEEDBACK_PAGE, limit: FEEDBACK_LIMIT }\n// ) {\n//   const { data } = await axios.get(API_ENDPOINTS.FEEDBACKS, { params });\n\n//   return data;\n// }\n\n// // Orders\n// export async function createOrder(orderData) {\n//   const { data } = await axios.post(API_ENDPOINTS.ORDERS, orderData);\n//   return data;\n// }\n","// Допоміжні функції, які знадобляться для реалізації завдання (показ повідомлень, кнопок, лоадерів)\n\nimport refs from './refs';\n\nexport function showLoadMoreBtn() {\n  setTimeout(() => {\n    refs.loadMoreBtn.classList.add('is-show');\n  }, 500);\n}\n\nexport function hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('is-show');\n}\n","import iziToast from 'izitoast';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://furniture-store-v2.b.goit.study/api';\nconst modalWindow = document.querySelector('.modal-window');\n\nlet escHandler = null;\nlet backdropHandler = null;\n\n// ===== зірки =====\nfunction stars(rate = 0) {\n  const full = Math.floor(rate);\n  const half = rate % 1 >= 0.5 ? 1 : 0;\n  let out = '';\n  for (let i = 0; i < full; i++) out += '<span class=\"star star-full\">★</span>';\n  if (half) out += '<span class=\"star star-half\">★</span>';\n  for (let i = full + half; i < 5; i++)\n    out += '<span class=\"star star-empty\">★</span>';\n  return out;\n}\nfunction normalizeImages(list) {\n  const BASE = 'https://furniture-store-v2.b.goit.study';\n  return (list || []).map(src =>\n    typeof src === 'string' && src.startsWith('http') ? src : `${BASE}${src}`\n  );\n}\n\nfunction getRefs() {\n  return {\n    dialog: modalWindow.querySelector('.product-modalWindow'),\n    mainImg: modalWindow.querySelector('.modal-image-0'),\n    thumbsWrap: modalWindow.querySelector('.modal-bottom-row'),\n    titleEl: modalWindow.querySelector('.product-modal-title'),\n    catEl: modalWindow.querySelector('.modal-description'),\n    priceEl: modalWindow.querySelector('.modal-price'),\n    starsEl: modalWindow.querySelector('.modal-rating-stars'),\n    colorsWrap: modalWindow.querySelector('.radio-group'),\n    descEl: modalWindow.querySelector('.furnitureDescription'),\n    sizeEl: modalWindow.querySelector('.furnitureSize'),\n    btnClose: modalWindow.querySelector('.modal-close-btn'),\n    orderBtn: modalWindow.querySelector('.modalButton'),\n  };\n}\n\nexport async function openProductModal(id) {\n  try {\n    // відкрити модалку\n    document.body.classList.add('modal-open');\n    modalWindow.classList.remove('visuallyhidden');\n\n    const { data } = await axios.get(`/furnitures/${id}`);\n\n    const {\n      dialog,\n      mainImg,\n      thumbsWrap,\n      titleEl,\n      catEl,\n      priceEl,\n      starsEl,\n      colorsWrap,\n      descEl,\n      sizeEl,\n      btnClose,\n      orderBtn,\n    } = getRefs();\n\n    // — гарантуємо картинки —\n    const imgs = normalizeImages(data.images || data.image || []);\n    const safeImgs = imgs.length\n      ? imgs\n      : ['https://via.placeholder.com/640x360?text=No+Image'];\n    const main = safeImgs[0];\n    const thumbs = safeImgs.slice(1, 3);\n\n    // ліва колонка\n    if (mainImg) {\n      mainImg.src = main;\n      mainImg.alt = data?.name || 'photo';\n    }\n    if (thumbsWrap) {\n      thumbsWrap.innerHTML = thumbs\n        .map(\n          src =>\n            `<img class=\"modal-thumb\" src=\"${src}\" alt=\"${\n              data?.name || 'thumb'\n            }\">`\n        )\n        .join('');\n\n      // делегування кліку по прев’ю\n      if (!thumbsWrap.dataset.bound) {\n        thumbsWrap.addEventListener('click', e => {\n          const img = e.target.closest('.modal-thumb');\n          if (!img || !mainImg) return;\n          const tmp = mainImg.src;\n          mainImg.src = img.src;\n          img.src = tmp;\n        });\n        thumbsWrap.dataset.bound = '1';\n      }\n    }\n\n    // права колонка\n    if (titleEl) titleEl.textContent = data?.name || '';\n    if (catEl) catEl.textContent = data?.category?.name || 'Без категорії';\n    if (priceEl) priceEl.textContent = `${data?.price ?? 0} грн`;\n    if (starsEl) starsEl.innerHTML = stars(data?.rate || 0);\n\n    if (colorsWrap) {\n      const colors = Array.isArray(data?.color) ? data.color : [];\n      colorsWrap.innerHTML = colors\n        .map(\n          (c, i) =>\n            `<label><input type=\"radio\" name=\"color\" value=\"${c}\" ${\n              i === 0 ? 'checked' : ''\n            }><span class=\"color-circle\" style=\"background:${c}\"></span></label>`\n        )\n        .join('');\n    }\n\n    if (descEl) descEl.textContent = data?.description || 'Опис відсутній';\n    if (sizeEl) sizeEl.textContent = `Розміри: ${data?.sizes || '—'}`;\n\n    // закриття: бекдроп + ✕ + Esc\n    if (btnClose) btnClose.onclick = closeModal;\n\n    backdropHandler = e => {\n      if (e.target === modalWindow) closeModal(); // тільки прямий клік по бекдропу\n    };\n    modalWindow.addEventListener('mousedown', backdropHandler);\n\n    escHandler = e => {\n      if (e.key === 'Escape') closeModal();\n    };\n    document.addEventListener('keydown', escHandler);\n\n    // кнопка замовлення (якщо треба — кинемо подію, аби інший модуль відкрив форму)\n    if (orderBtn) {\n      orderBtn.onclick = () => {\n        const checked = modalWindow.querySelector(\n          'input[name=\"color\"]:checked'\n        );\n        const color = checked ? checked.value : null;\n        closeModal();\n        document.dispatchEvent(\n          new CustomEvent('openOrderModal', {\n            detail: { id, color },\n          })\n        );\n      };\n    }\n\n    if (dialog) {\n      dialog.setAttribute('tabindex', '-1');\n      dialog.focus({ preventScroll: true });\n    }\n  } catch (e) {\n    console.error('❌ Помилка завантаження товару', e);\n    closeModal();\n  }\n}\n\n// ===== приватні\nfunction closeModal() {\n  modalWindow.classList.add('visuallyhidden');\n  document.body.classList.remove('modal-open');\n\n  if (escHandler) {\n    document.removeEventListener('keydown', escHandler);\n    escHandler = null;\n  }\n  if (backdropHandler) {\n    modalWindow.removeEventListener('mousedown', backdropHandler);\n    backdropHandler = null;\n  }\n}\n\n/* ===== тестовий виклик (можна прибрати) =====\n */\n// openProductModal('682f9bbf8acbdf505592ac45');\n\n// order-modal\n\nconst backdropOrderModal = document.querySelector('.backdrop');\nconst modalOrder = document.querySelector('.order-modal');\nconst closeOrderBtn = document.querySelector('.modal-close-btn');\nconst submitBtn = document.querySelector('.modal-submit-btn');\nconst orderForm = document.querySelector('.modal-order-form');\n\nfunction openOrderModal() {\n  backdropOrderModal.classList.add('is-open');\n  document.body.classList.add('modal-open');\n\n  window.addEventListener('keydown', handleEscape);\n}\n\nfunction closeOrderModal() {\n  backdropOrderModal.classList.remove('is-open');\n  document.body.classList.remove('modal-open');\n\n  window.removeEventListener('keydown', handleEscape);\n}\n\ncloseOrderBtn.addEventListener('click', closeOrderModal);\n\nbackdropOrderModal.addEventListener('click', event => {\n  if (event.target === backdropOrderModal) {\n    closeOrderModal();\n  }\n});\n\nfunction handleEscape(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    closeOrderModal();\n  }\n}\n\norderForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const name = orderForm.elements['user-name'].value.trim();\n  const phone = orderForm.elements['phone'].value.trim();\n  const comment = orderForm.elements['user-comment'].value.trim();\n\n  if (!name || !phone) {\n    iziToast.warning({\n      title: 'Ooops!',\n      message: \"Будь ласка, заповніть всі обов'язкові поля!\",\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const clearPhone = phone.replace(/[^\\d+]/g, '');\n  const phonePattern = /^\\+?\\d{10,15}$/;\n\n  if (!phonePattern.test(clearPhone)) {\n    iziToast.warning({\n      title: 'Ooops!',\n      message: 'Будь ласка, введіть коректний номер телефону',\n      position: 'topRight',\n    });\n    return;\n  }\n});\n\n// тестова кнопка для відкриття модалки\ndocument\n  .querySelector('.open-modal-btn')\n  ?.addEventListener('click', openOrderModal);\n","// Хендлери, які передаються в addEventListener.\n\nimport {\n  clearFurnitures,\n  renderCategories,\n  renderFurnitures,\n} from './render-function';\nimport {\n  getFurnitures,\n  getFurnitureByID,\n  getCategories,\n  getFeedbacks,\n  createOrder,\n  getFurnituresByCategories,\n} from './products-api.js';\n\nimport {\n  FURNITURE_PAGE,\n  FURNITURE_LIMIT,\n  FEEDBACK_PAGE,\n  FEEDBACK_LIMIT,\n} from './constants.js';\nimport refs from './refs.js';\nimport { hideLoadMoreBtn, showLoadMoreBtn } from './helpers.js';\n\nlet currentPage = 1;\nlet currentCategory = '';\n\nexport async function initialHome() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n\n    currentCategory = 'all';\n    const allCategoryItem = refs.categories.children[0];\n    allCategoryItem.classList.add('categories-item--active');\n\n    // showLoader();\n    const { furnitures } = await getFurnitures();\n    renderFurnitures(furnitures);\n    showLoadMoreBtn();\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\nexport async function handlerClickCategory(event) {\n  const item = event.target.closest('.category-item');\n  if (!item) {\n    return;\n  }\n\n  const categoriesChildrenArrey = [...event.currentTarget.children];\n\n  categoriesChildrenArrey.map(child => {\n    child.classList.remove('categories-item--active');\n  });\n\n  clearFurnitures();\n  item.classList.add('categories-item--active');\n  currentPage = 1;\n  currentCategory = item.id;\n\n  // showLoader();\n  try {\n    if (currentCategory === 'all') {\n      const { furnitures } = await getFurnitures();\n      renderFurnitures(furnitures);\n      showLoadMoreBtn();\n    } else {\n      const { furnitures, totalItems } = await getFurnituresByCategories(\n        currentCategory,\n        currentPage\n      );\n      if (!furnitures.length) {\n        hideLoadMoreBtn();\n        // showInfo('Not found');\n        return;\n      } else {\n        if (totalItems < FURNITURE_LIMIT) {\n          hideLoadMoreBtn();\n          // showInfo('End collections');\n        }\n        renderFurnitures(furnitures);\n      }\n    }\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\nexport async function onLoadMoreClick(event) {\n  event.preventDefault();\n  currentPage++;\n  // showLoader();\n\n  try {\n    if (currentCategory === 'all') {\n      const { furnitures, totalItems } = await getFurnitures(currentPage);\n      if (totalItems < FURNITURE_LIMIT * currentPage) {\n        hideLoadMoreBtn();\n        // showInfo('End collections');\n      } else {\n        showLoadMoreBtn();\n      }\n      renderFurnitures(furnitures);\n    } else {\n      const { furnitures, totalItems } = await getFurnituresByCategories(\n        currentCategory,\n        currentPage\n      );\n\n      if (!furnitures.length) {\n        hideLoadMoreBtn();\n        // showInfo('Not found');\n        return;\n      } else {\n        if (totalItems < FURNITURE_LIMIT) {\n          hideLoadMoreBtn();\n          // showInfo('End collections');\n        }\n        renderFurnitures(furnitures);\n      }\n    }\n  } catch (error) {\n    // showError(error);\n  } finally {\n    // hideLoader();\n  }\n}\n\nimport { openProductModal } from './modal.js';\n\n\nexport const onProductsClick = e => {\n  const btn = e.target.closest('.products-details-btn'); \n  if (!btn) return;\n\n  const card = btn.closest('.product-item');\n  if (!card) return;\n\n  let id = card.dataset.id;\n\n\n  if (!id) {\n    const img = card.querySelector('img[src*=\"/furniture/\"]');\n    const src = img?.getAttribute('src') || '';\n    const m = src.match(/\\/([a-f0-9]{24})_/i);\n    if (m) id = m[1];\n  }\n\n  if (!id) {\n    console.warn('Не знайдено id товару для модалки');\n    return;\n  }\n\n  e.preventDefault();\n  openProductModal(id);\n};\n\n\n// // furniture\n// export async function loadFurnitures(\n//   params = { page: FURNITURE_PAGE, limit: FURNITURE_LIMIT }\n// ) {\n//   try {\n//     const data = await getFurnitures(params);\n//     console.log('Furnitures:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Furnitures downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadFurnitureById(id) {\n//   try {\n//     const data = await loadFurnitureById(id);\n//     console.log('Furniture details:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Furniture id downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadCategories() {\n//   try {\n//     const data = await loadCategories();\n//     console.log('Categories:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Categories downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function loadFeedbacks(\n//   params = { page: FEEDBACK_PAGE, limit: FEEDBACK_LIMIT }\n// ) {\n//   try {\n//     const data = await loadFeedbacks(params);\n//     console.log('Feedbacks', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Feedbacks downloading error:', error);\n//     return null;\n//   }\n// }\n// export async function sendOrder() {\n//   try {\n//     const data = await sendOrder();\n//     console.log('Order created:', data);\n//     return data;\n//   } catch (error) {\n//     console.error('Creating order error:', error);\n//     return null;\n//   }\n// }\n","// src/main.js\nimport refs from './js/refs.js';\nimport {\n  handlerClickCategory,\n  initialHome,\n  onLoadMoreClick,\n  onProductsClick, // \n} from './js/handlers.js';\n\nwindow.addEventListener('load', () => {\n  requestAnimationFrame(() => {\n    window.scrollTo({ top: 0, left: 0, behavior: 'auto' });\n  });\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initialHome();\n\n  if (refs.categories && !refs.categories.dataset.bound) {\n    refs.categories.addEventListener('click', handlerClickCategory);\n    refs.categories.dataset.bound = '1';\n  }\n\n  if (refs.loadMoreBtn && !refs.loadMoreBtn.dataset.bound) {\n    refs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n    refs.loadMoreBtn.dataset.bound = '1';\n  }\n\n \n  const productsEl = refs.products || document.getElementById('products');\n  if (productsEl && productsEl.dataset.boundModal !== '1') {\n    productsEl.addEventListener('click', onProductsClick); \n    productsEl.dataset.boundModal = '1';\n  }\n});\n"],"names":["refs","renderCategories","arrey","murkup","_id","catName","renderFurnitures","markup","name","images","price","color","hex","clearFurnitures","Accordion","BASE_URL","API_ENDPOINTS","FURNITURE_LIMIT","axios","getFurnitures","currentPage","data","getFurnituresByCategories","categoryId","getCategories","showLoadMoreBtn","hideLoadMoreBtn","modalWindow","escHandler","backdropHandler","stars","rate","full","half","out","i","normalizeImages","list","BASE","src","getRefs","openProductModal","id","dialog","mainImg","thumbsWrap","titleEl","catEl","priceEl","starsEl","colorsWrap","descEl","sizeEl","btnClose","orderBtn","imgs","safeImgs","main","thumbs","e","img","tmp","colors","c","closeModal","checked","backdropOrderModal","closeOrderBtn","orderForm","openOrderModal","handleEscape","closeOrderModal","event","phone","iziToast","clearPhone","currentCategory","initialHome","categories","furnitures","handlerClickCategory","item","child","totalItems","onLoadMoreClick","onProductsClick","btn","card","m","productsEl"],"mappings":"owBAEA,MAAMA,EAAO,CACX,WAAY,SAAS,cAAc,aAAa,EAChD,SAAU,SAAS,cAAc,WAAW,EAC5C,MAAO,SAAS,cAAc,QAAQ,EACtC,aAAc,SAAS,cAAc,gBAAgB,EACrD,YAAa,SAAS,cAAc,gBAAgB,EACpD,SAAU,SAAS,cAAc,sBAAsB,EACvD,OAAQ,SAAS,cAAc,SAAS,EACxC,iBAAkB,SAAS,cAAc,qBAAqB,EAC9D,gBAAiB,SAAS,cAAc,oBAAoB,EAC5D,gBAAiB,SAAS,cAAc,oBAAoB,CAC9D,ECPO,SAASC,EAAiBC,EAAO,CAGtC,MAAMC,EAFa,CAAC,CAAE,IAAK,MAAO,KAAM,YAAY,EAAI,GAAGD,CAAK,EAG7D,IACC,CAAC,CAAE,IAAAE,EAAK,KAAMC,CAAO,IAAO;AAAA,oCACED,CAAG;AAAA;AAAA;AAAA,kCAGLA,CAAG;AAAA,kCACHA,CAAG;AAAA;AAAA;AAAA,sDAGiBC,CAAO,gBAC7D,EACK,KAAK,EAAE,EACVL,EAAK,WAAW,UAAYG,CAC9B,CAEO,SAASG,EAAiBJ,EAAO,CACtC,MAAMK,EAASL,EACZ,IACC,CAAC,CACC,IAAAE,EACA,KAAAI,EACA,OAAAC,EACA,MAAAC,EACA,MAAAC,CACR,IAAY,qCAAqCP,CAAG;AAAA;AAAA;AAAA,iBAGnCK,EAAO,CAAC,CAAC;AAAA,iBACTD,CAAI;AAAA;AAAA;AAAA,uCAGkBA,CAAI;AAAA;AAAA,cAE7BG,EACC,IACCC,GACE,2DAA2DA,CAAG,SAChF,EACe,KAAK,EAAE,CAAC;AAAA;AAAA,sCAEeF,CAAK;AAAA;AAAA;AAAA,YAI3C,EACK,KAAK,EAAE,EACVV,EAAK,SAAS,mBAAmB,YAAaO,CAAM,CACtD,CAEO,SAASM,GAAkB,CAChCb,EAAK,SAAS,UAAY,EAC5B,CAGI,IAAIc,EAAU,uBAAwB,CACpC,SAAU,IACV,aAAc,EACpB,CAAK,ECjEE,MAAMC,EAAW,8CACXC,EAAgB,CAC3B,WAAY,cACZ,WAAY,aAGd,EAEaC,EAAkB,ECE/BC,EAAM,SAAS,QAAUH,EAGlB,eAAeI,EAAcC,EAAc,EAAG,CACnD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMH,EACrB,GAAGF,EAAc,UAAU,SAASI,CAAW,UAAUH,CAAe,EAC5E,EACE,OAAOI,CACT,CAEO,eAAeC,EAA0BC,EAAYH,EAAa,CACvE,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMH,EACrB,GAAGF,EAAc,UAAU,SAASI,CAAW,UAAUH,CAAe,aAAaM,CAAU,EACnG,EACE,OAAOF,CACT,CAWO,eAAeG,GAAgB,CAGpC,OAFiB,MAAMN,EAAM,IAAIF,EAAc,UAAU,GACzB,IAElC,CCtCO,SAASS,GAAkB,CAChC,WAAW,IAAM,CACfzB,EAAK,YAAY,UAAU,IAAI,SAAS,CAC1C,EAAG,GAAG,CACR,CAEO,SAAS0B,GAAkB,CAChC1B,EAAK,YAAY,UAAU,OAAO,SAAS,CAC7C,CCTAkB,EAAM,SAAS,QAAU,8CACzB,MAAMS,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIC,EAAa,KACbC,EAAkB,KAGtB,SAASC,EAAMC,EAAO,EAAG,CACvB,MAAMC,EAAO,KAAK,MAAMD,CAAI,EACtBE,EAAOF,EAAO,GAAK,GAAM,EAAI,EACnC,IAAIG,EAAM,GACV,QAASC,EAAI,EAAGA,EAAIH,EAAMG,IAAKD,GAAO,wCAClCD,IAAMC,GAAO,yCACjB,QAASC,EAAIH,EAAOC,EAAME,EAAI,EAAGA,IAC/BD,GAAO,yCACT,OAAOA,CACT,CACA,SAASE,EAAgBC,EAAM,CAC7B,MAAMC,EAAO,0CACb,OAAQD,GAAQ,IAAI,IAAIE,GACtB,OAAOA,GAAQ,UAAYA,EAAI,WAAW,MAAM,EAAIA,EAAM,GAAGD,CAAI,GAAGC,CAAG,EAC3E,CACA,CAEA,SAASC,GAAU,CACjB,MAAO,CACL,OAAQb,EAAY,cAAc,sBAAsB,EACxD,QAASA,EAAY,cAAc,gBAAgB,EACnD,WAAYA,EAAY,cAAc,mBAAmB,EACzD,QAASA,EAAY,cAAc,sBAAsB,EACzD,MAAOA,EAAY,cAAc,oBAAoB,EACrD,QAASA,EAAY,cAAc,cAAc,EACjD,QAASA,EAAY,cAAc,qBAAqB,EACxD,WAAYA,EAAY,cAAc,cAAc,EACpD,OAAQA,EAAY,cAAc,uBAAuB,EACzD,OAAQA,EAAY,cAAc,gBAAgB,EAClD,SAAUA,EAAY,cAAc,kBAAkB,EACtD,SAAUA,EAAY,cAAc,cAAc,CACtD,CACA,CAEO,eAAec,EAAiBC,EAAI,CACzC,GAAI,CAEF,SAAS,KAAK,UAAU,IAAI,YAAY,EACxCf,EAAY,UAAU,OAAO,gBAAgB,EAE7C,KAAM,CAAE,KAAAN,CAAI,EAAK,MAAMH,EAAM,IAAI,eAAewB,CAAE,EAAE,EAE9C,CACJ,OAAAC,EACA,QAAAC,EACA,WAAAC,EACA,QAAAC,EACA,MAAAC,EACA,QAAAC,EACA,QAAAC,EACA,WAAAC,EACA,OAAAC,EACA,OAAAC,EACA,SAAAC,EACA,SAAAC,CACN,EAAQd,EAAO,EAGLe,EAAOnB,EAAgBf,EAAK,QAAUA,EAAK,OAAS,EAAE,EACtDmC,EAAWD,EAAK,OAClBA,EACA,CAAC,mDAAmD,EAClDE,EAAOD,EAAS,CAAC,EACjBE,EAASF,EAAS,MAAM,EAAG,CAAC,EAoClC,GAjCIZ,IACFA,EAAQ,IAAMa,EACdb,EAAQ,IAAMvB,GAAM,MAAQ,SAE1BwB,IACFA,EAAW,UAAYa,EACpB,IACCnB,GACE,iCAAiCA,CAAG,UAClClB,GAAM,MAAQ,OAC5B,IACA,EACS,KAAK,EAAE,EAGLwB,EAAW,QAAQ,QACtBA,EAAW,iBAAiB,QAASc,GAAK,CACxC,MAAMC,EAAMD,EAAE,OAAO,QAAQ,cAAc,EAC3C,GAAI,CAACC,GAAO,CAAChB,EAAS,OACtB,MAAMiB,EAAMjB,EAAQ,IACpBA,EAAQ,IAAMgB,EAAI,IAClBA,EAAI,IAAMC,CACZ,CAAC,EACDhB,EAAW,QAAQ,MAAQ,MAK3BC,IAASA,EAAQ,YAAczB,GAAM,MAAQ,IAC7C0B,IAAOA,EAAM,YAAc1B,GAAM,UAAU,MAAQ,iBACnD2B,IAASA,EAAQ,YAAc,GAAG3B,GAAM,OAAS,CAAC,QAClD4B,IAASA,EAAQ,UAAYnB,EAAMT,GAAM,MAAQ,CAAC,GAElD6B,EAAY,CACd,MAAMY,EAAS,MAAM,QAAQzC,GAAM,KAAK,EAAIA,EAAK,MAAQ,CAAA,EACzD6B,EAAW,UAAYY,EACpB,IACC,CAACC,EAAG5B,IACF,kDAAkD4B,CAAC,KACjD5B,IAAM,EAAI,UAAY,EACpC,iDAA6D4B,CAAC,mBAC9D,EACS,KAAK,EAAE,CACZ,CAEIZ,IAAQA,EAAO,YAAc9B,GAAM,aAAe,kBAClD+B,IAAQA,EAAO,YAAc,YAAY/B,GAAM,OAAS,GAAG,IAG3DgC,IAAUA,EAAS,QAAUW,GAEjCnC,EAAkB8B,GAAK,CACjBA,EAAE,SAAWhC,GAAaqC,EAAU,CAC1C,EACArC,EAAY,iBAAiB,YAAaE,CAAe,EAEzDD,EAAa+B,GAAK,CACZA,EAAE,MAAQ,UAAUK,EAAU,CACpC,EACA,SAAS,iBAAiB,UAAWpC,CAAU,EAG3C0B,IACFA,EAAS,QAAU,IAAM,CACvB,MAAMW,EAAUtC,EAAY,cAC1B,6BACV,EACchB,EAAQsD,EAAUA,EAAQ,MAAQ,KACxCD,EAAU,EACV,SAAS,cACP,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,GAAAtB,EAAI,MAAA/B,CAAK,CAC/B,CAAW,CACX,CACM,GAGEgC,IACFA,EAAO,aAAa,WAAY,IAAI,EACpCA,EAAO,MAAM,CAAE,cAAe,EAAI,CAAE,EAExC,OAAS,EAAG,CACV,QAAQ,MAAM,gCAAiC,CAAC,EAChDqB,EAAU,CACZ,CACF,CAGA,SAASA,GAAa,CACpBrC,EAAY,UAAU,IAAI,gBAAgB,EAC1C,SAAS,KAAK,UAAU,OAAO,YAAY,EAEvCC,IACF,SAAS,oBAAoB,UAAWA,CAAU,EAClDA,EAAa,MAEXC,IACFF,EAAY,oBAAoB,YAAaE,CAAe,EAC5DA,EAAkB,KAEtB,CAQA,MAAMqC,EAAqB,SAAS,cAAc,WAAW,EAC1C,SAAS,cAAc,cAAc,EACxD,MAAMC,EAAgB,SAAS,cAAc,kBAAkB,EAC7C,SAAS,cAAc,mBAAmB,EAC5D,MAAMC,EAAY,SAAS,cAAc,mBAAmB,EAE5D,SAASC,GAAiB,CACxBH,EAAmB,UAAU,IAAI,SAAS,EAC1C,SAAS,KAAK,UAAU,IAAI,YAAY,EAExC,OAAO,iBAAiB,UAAWI,CAAY,CACjD,CAEA,SAASC,GAAkB,CACzBL,EAAmB,UAAU,OAAO,SAAS,EAC7C,SAAS,KAAK,UAAU,OAAO,YAAY,EAE3C,OAAO,oBAAoB,UAAWI,CAAY,CACpD,CAEAH,EAAc,iBAAiB,QAASI,CAAe,EAEvDL,EAAmB,iBAAiB,QAASM,GAAS,CAChDA,EAAM,SAAWN,GACnBK,EAAe,CAEnB,CAAC,EAED,SAASD,EAAaE,EAAO,EACvBA,EAAM,MAAQ,UAAYA,EAAM,MAAQ,QAC1CD,EAAe,CAEnB,CAEAH,EAAU,iBAAiB,SAAUI,GAAS,CAC5CA,EAAM,eAAc,EAEpB,MAAMhE,EAAO4D,EAAU,SAAS,WAAW,EAAE,MAAM,KAAI,EACjDK,EAAQL,EAAU,SAAS,MAAS,MAAM,KAAI,EAGpD,GAFgBA,EAAU,SAAS,cAAc,EAAE,MAAM,KAAI,EAEzD,CAAC5D,GAAQ,CAACiE,EAAO,CACnBC,EAAS,QAAQ,CACf,MAAO,SACP,QAAS,8CACT,SAAU,UAChB,CAAK,EACD,MACF,CAEA,MAAMC,EAAaF,EAAM,QAAQ,UAAW,EAAE,EAG9C,GAAI,CAFiB,iBAEH,KAAKE,CAAU,EAAG,CAClCD,EAAS,QAAQ,CACf,MAAO,SACP,QAAS,+CACT,SAAU,UAChB,CAAK,EACD,MACF,CACF,CAAC,EAGD,SACG,cAAc,iBAAiB,GAC9B,iBAAiB,QAASL,CAAc,ECjO5C,IAAIjD,EAAc,EACdwD,EAAkB,GAEf,eAAeC,GAAc,CAClC,GAAI,CACF,MAAMC,EAAa,MAAMtD,EAAa,EACtCvB,EAAiB6E,CAAU,EAE3BF,EAAkB,MACM5E,EAAK,WAAW,SAAS,CAAC,EAClC,UAAU,IAAI,yBAAyB,EAGvD,KAAM,CAAE,WAAA+E,GAAe,MAAM5D,EAAa,EAC1Cb,EAAiByE,CAAU,EAC3BtD,EAAe,CACjB,MAAgB,CAEhB,QAAC,CAED,CACF,CAEO,eAAeuD,EAAqBR,EAAO,CAChD,MAAMS,EAAOT,EAAM,OAAO,QAAQ,gBAAgB,EAClD,GAAI,CAACS,EACH,OAG8B,CAAC,GAAGT,EAAM,cAAc,QAAQ,EAExC,IAAIU,GAAS,CACnCA,EAAM,UAAU,OAAO,yBAAyB,CAClD,CAAC,EAEDrE,EAAe,EACfoE,EAAK,UAAU,IAAI,yBAAyB,EAC5C7D,EAAc,EACdwD,EAAkBK,EAAK,GAGvB,GAAI,CACF,GAAIL,IAAoB,MAAO,CAC7B,KAAM,CAAE,WAAAG,GAAe,MAAM5D,EAAa,EAC1Cb,EAAiByE,CAAU,EAC3BtD,EAAe,CACjB,KAAO,CACL,KAAM,CAAE,WAAAsD,EAAY,WAAAI,CAAU,EAAK,MAAM7D,EACvCsD,EACAxD,CACR,EACM,GAAK2D,EAAW,OAKVI,EAAalE,GACfS,EAAe,EAGjBpB,EAAiByE,CAAU,MATL,CACtBrD,EAAe,EAEf,MACF,CAOF,CACF,MAAgB,CAEhB,QAAC,CAED,CACF,CAEO,eAAe0D,GAAgBZ,EAAO,CAC3CA,EAAM,eAAc,EACpBpD,IAGA,GAAI,CACF,GAAIwD,IAAoB,MAAO,CAC7B,KAAM,CAAE,WAAAG,EAAY,WAAAI,CAAU,EAAK,MAAMhE,EAAcC,CAAW,EAC9D+D,EAAalE,EAAkBG,EACjCM,EAAe,EAGfD,EAAe,EAEjBnB,EAAiByE,CAAU,CAC7B,KAAO,CACL,KAAM,CAAE,WAAAA,EAAY,WAAAI,CAAU,EAAK,MAAM7D,EACvCsD,EACAxD,CACR,EAEM,GAAK2D,EAAW,OAKVI,EAAalE,GACfS,EAAe,EAGjBpB,EAAiByE,CAAU,MATL,CACtBrD,EAAe,EAEf,MACF,CAOF,CACF,MAAgB,CAEhB,QAAC,CAED,CACF,CAKO,MAAM2D,GAAkB1B,GAAK,CAClC,MAAM2B,EAAM3B,EAAE,OAAO,QAAQ,uBAAuB,EACpD,GAAI,CAAC2B,EAAK,OAEV,MAAMC,EAAOD,EAAI,QAAQ,eAAe,EACxC,GAAI,CAACC,EAAM,OAEX,IAAI7C,EAAK6C,EAAK,QAAQ,GAGtB,GAAI,CAAC7C,EAAI,CAGP,MAAM8C,GAFMD,EAAK,cAAc,yBAAyB,GACvC,aAAa,KAAK,GAAK,IAC1B,MAAM,oBAAoB,EACpCC,IAAG9C,EAAK8C,EAAE,CAAC,EACjB,CAEA,GAAI,CAAC9C,EAAI,CACP,QAAQ,KAAK,mCAAmC,EAChD,MACF,CAEAiB,EAAE,eAAc,EAChBlB,EAAiBC,CAAE,CACrB,ECzJA,OAAO,iBAAiB,OAAQ,IAAM,CACpC,sBAAsB,IAAM,CAC1B,OAAO,SAAS,CAAE,IAAK,EAAG,KAAM,EAAG,SAAU,OAAQ,CACvD,CAAC,CACH,CAAC,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAClDmC,EAAW,EAEP7E,EAAK,YAAc,CAACA,EAAK,WAAW,QAAQ,QAC9CA,EAAK,WAAW,iBAAiB,QAASgF,CAAoB,EAC9DhF,EAAK,WAAW,QAAQ,MAAQ,KAG9BA,EAAK,aAAe,CAACA,EAAK,YAAY,QAAQ,QAChDA,EAAK,YAAY,iBAAiB,QAASoF,EAAe,EAC1DpF,EAAK,YAAY,QAAQ,MAAQ,KAInC,MAAMyF,EAAazF,EAAK,UAAY,SAAS,eAAe,UAAU,EAClEyF,GAAcA,EAAW,QAAQ,aAAe,MAClDA,EAAW,iBAAiB,QAASJ,EAAe,EACpDI,EAAW,QAAQ,WAAa,IAEpC,CAAC"}