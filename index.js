import{A as D,a as u,i as E,R,S as H,N as U,P as W}from"./assets/vendor-lXkXHKPV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const C=document.querySelector(".order-modal"),i=document.querySelector(".modal-window"),r={categories:document.querySelector("#categories"),products:document.querySelector("#products"),loadMoreBtn:document.querySelector(".load-more-btn"),feedbackCardList:document.querySelector(".feedback-card-list"),feedbackNavPrev:document.querySelector(".feedback-nav-prev"),feedbackNavNext:document.querySelector(".feedback-nav-next"),feedbackPaginationDots:document.querySelector(".feedback-pagination-dots"),feedbackSwiper:document.querySelector(".feedback-swiper"),loader:document.querySelector(".backdrope-loader"),backdropOrderModal:document.querySelector(".backdrop"),modalOrder:C,closeOrderBtn:C?.querySelector(".modal-close-btn"),submitBtn:C?.querySelector(".modal-submit-btn"),orderForm:C?.querySelector(".modal-order-form"),productModal:i,productModalDialog:i?.querySelector(".product-modalWindow"),productModalMainImg:i?.querySelector(".modal-image-0"),productModalThumbsWrap:i?.querySelector(".modal-bottom-row"),productModalTitle:i?.querySelector(".product-modal-title"),productModalCategory:i?.querySelector(".modal-description"),productModalPrice:i?.querySelector(".modal-price"),productModalStars:i?.querySelector(".modal-rating-stars"),productModalColorsWrap:i?.querySelector(".radio-group"),productModalDescription:i?.querySelector(".furnitureDescription"),productModalSize:i?.querySelector(".furnitureSize"),productModalCloseBtn:i?.querySelector(".modal-close-btn"),productModalOrderBtn:i?.querySelector(".modalButton"),burgerMenuOpenBtn:document.querySelector("[data-menu-open]"),burgerMenu:document.querySelector(".burger-menu"),burgerMenuHeaderNav:document.querySelector(".header-nav"),burgerMenuHeaderButton:document.querySelector(".burger-menu-header-button"),body:document.body};function z(e){const o=[{_id:"all",name:"Всі товари"},...e].map(({_id:n,name:a})=>`<li
        class="category-item" id="${n}"
        style="
          background-image: image-set(
            url('./furniture-bg/${n}.png') 1x,
            url('./furniture-bg/${n}@2x.png') 2x
          );
        "
      ><button class="categories-btn" type="button">${a}</button></li>`).join("");r.categories.innerHTML=o}function k(e){const t=e.map(({_id:o,name:n,images:a,price:s,color:c})=>`<li class="product-item" data-id="${o}">
        <img
          class="products-image"
          src='${a[0]}'
          alt="${n}"
        />
        <div class="product-description-box">
          <h4 class="products-title">${n}</h4>
          <ul class="products-color-list">
            ${c.map(d=>`<li class="products-color-box" style="background-color: ${d}"></li>`).join("")}
          </ul>
          <p class="products-price">${s} грн</p>
        </div>
        <button class="products-details-btn" type="button">Детальніше</button>
      </li>`).join("");r.products.insertAdjacentHTML("beforeend",t)}function G(){r.products.innerHTML=""}new D(".accordion-container",{duration:300,showMultiple:!1,beforeOpen:e=>{const t=e.querySelector(".ac-icon");t&&(t.style.transform="translateY(-50%) rotate(180deg)")},beforeClose:e=>{const t=e.querySelector(".ac-icon");t&&(t.style.transform="translateY(-50%) rotate(0deg)")}});const j="https://furniture-store-v2.b.goit.study/api",S={FURNITURES:"/furnitures",CATEGORIES:"/categories",FEEDBACKS:"/feedbacks",ORDERS:"/orders"},K=1,L=8,_=1,x=10,V=e=>`/furnitures/${e}`;u.defaults.baseURL=j;async function Y(){return(await u.get(S.CATEGORIES)).data}async function F(e=K){const{data:t}=await u(`${S.FURNITURES}?page=${e}&limit=${L}`);return t}async function $(e,t){const{data:o}=await u(`${S.FURNITURES}?page=${t}&limit=${L}&category=${e}`);return o}async function J(e){const t=V(e);return(await u.get(t)).data}async function Q(e={page:_,limit:x}){return(await u.get(S.FEEDBACKS,{params:e})).data}async function X(e){return(await u.post(S.ORDERS,e)).data}function A(){setTimeout(()=>{r.loadMoreBtn.classList.add("is-show")},500)}function p(){r.loadMoreBtn.classList.remove("is-show")}function Z(e){return e<1||e>5?e:e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}E.settings({position:"topRight",displayMode:"replace",timeout:4e3,progressBar:!1});function y(e){E.info({message:e})}function ee(e){E.success({message:e})}function m(e){E.warning({message:e})}function g(e){E.error({message:e.message})}function w(){r.loader.classList.remove("hidden"),p()}function B(){r.loader.classList.add("hidden")}let I=null,T=null;function te(){r.orderForm.querySelectorAll("input, textarea").forEach(e=>localStorage.removeItem(e.name))}function re(e,t){if(!e||!t)return m("Please fill in your name and phone number."),!1;if(!I)return m("Choose a product before ordering."),!1;const o=t.replace(/[^\d+]/g,"");return/^\+?\d{10,12}$/.test(o)?o:(m("Enter a valid phone number."),!1)}function oe(){r.orderForm.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("input",t=>{localStorage.setItem(t.target.name,t.target.value)})})}async function ne(e){e.preventDefault();const t=r.orderForm.elements["user-name"]?.value.trim(),o=r.orderForm.elements["user-phone"]?.value.trim();r.orderForm.elements["user-comment"]?.value.trim();const n=re(t,o);if(!n)return;const a={name:t,phone:n,comment:"empty",modelId:I,color:T};r.submitBtn.disabled=!0;try{w(),await X(a),ee("Your order has been sent!"),r.orderForm.reset(),te(),P()}catch(s){g(s)}finally{B(),r.submitBtn.disabled=!1}}async function ae(e,t,o){document.body.classList.add("modal-open"),I=e??null,T=o??null,r.backdropOrderModal.classList.add("is-open"),se(),He()}async function P(){document.body.classList.remove("modal-open"),r.backdropOrderModal.classList.remove("is-open"),Ue()}function se(){r.orderForm.querySelectorAll("input, textarea").forEach(e=>{const t=localStorage.getItem(e.name);t&&(e.value=t)})}function ce(e=0){const t=Math.floor(e),o=e%1>=.5?1:0;let n="";for(let a=0;a<t;a++)n+='<span class="star star-full">★</span>';o&&(n+='<span class="star star-half">★</span>');for(let a=t+o;a<5;a++)n+='<span class="star star-empty">★</span>';return n}function ie(e){const t="https://furniture-store-v2.b.goit.study";return(e||[]).map(o=>typeof o=="string"&&o.startsWith("http")?o:`${t}${o}`)}function de(){return{dialog:r.productModalDialog,mainImg:r.productModalMainImg,thumbsWrap:r.productModalThumbsWrap,titleEl:r.productModalTitle,catEl:r.productModalCategory,priceEl:r.productModalPrice,starsEl:r.productModalStars,colorsWrap:r.productModalColorsWrap,descEl:r.productModalDescription,sizeEl:r.productModalSize,btnClose:r.productModalCloseBtn,orderBtn:r.productModalOrderBtn}}function le(e,t,o,n){if(!e||!t)return;const a=o.length?o:["https://via.placeholder.com/640x360?text=No+Image"],s=a[0],c=a.slice(1,3);e.src=s,e.alt=n||"photo",t.innerHTML=c.map(d=>`<img class="modal-thumb" src="${d}" alt="${n||"thumb"}">`).join("")}function ue(e,t){if(!e)return;const o=Array.isArray(t)?t:[];e.innerHTML=o.map((n,a)=>`<label>
          <input type="radio" name="color" value="${n}" ${a===0?"checked":""}>
          <span class="color-circle" style="background:${n}"></span>
        </label>`).join("")}function fe(e,t){const{titleEl:o,catEl:n,priceEl:a,starsEl:s,descEl:c,sizeEl:d}=e;o&&(o.textContent=t?.name||""),n&&(n.textContent=t?.category?.name||"Без категорії"),a&&(a.textContent=`${t?.price??0} грн`),s&&(s.innerHTML=ce(t?.rate||0)),c&&(c.textContent=t?.description||"Опис відсутній"),d&&(d.textContent=`Розміри: ${t?.sizes||"—"}`)}async function pe(e){try{w(),document.body.classList.add("modal-open"),r.productModal.classList.remove("visuallyhidden");const t=await J(e),o=de(),n=ie(t.images||t.image||[]);le(o.mainImg,o.thumbsWrap,n,t?.name),fe(o,t),ue(o.colorsWrap,t?.color),De(o,e)}catch(t){g(t)}finally{B()}}function N(){r.productModal.classList.add("visuallyhidden"),document.body.classList.remove("modal-open"),Re()}let f=1,b="";async function me(){try{w();const e=await Y();z(e),b="all",r.categories.children[0].classList.add("categories-item--active");const{furnitures:o}=await F();k(o),A()}catch(e){g(e)}finally{B()}}async function be(e){const t=e.target.closest(".category-item");if(!t)return;[...e.currentTarget.children].map(n=>{n.classList.remove("categories-item--active")}),G(),t.classList.add("categories-item--active"),f=1,b=t.id,w();try{if(b==="all"){const{furnitures:n}=await F();k(n),A()}else{const{furnitures:n,totalItems:a}=await $(b,f);if(n.length)a<L&&(p(),y(`Ended furnitures collections in "${t.textContent}" categories`)),k(n);else{p(),y(`Furnitures in "${t.textContent}" categories is not found`);return}}}catch(n){g(n)}finally{B()}}async function ge(e){e.preventDefault(),f++,w();try{if(b==="all"){const{furnitures:t,totalItems:o}=await F(f);o<L*f?(p(),y("End collections")):A(),k(t)}else{const{furnitures:t,totalItems:o}=await $(b,f);if(t.length)o<L&&(p(),y("End collections")),k(t);else{p(),y("Furnitures is not found");return}}}catch(t){g(t)}finally{B()}}const ye=e=>{const t=e.target.closest(".products-details-btn");if(!t)return;const o=t.closest(".product-item");if(!o)return;let n=o.dataset.id;if(!n){const c=(o.querySelector('img[src*="/furniture/"]')?.getAttribute("src")||"").match(/\/([a-f0-9]{24})_/i);c&&(n=c[1])}if(!n){m("ID not found");return}e.preventDefault(),pe(n)};function ve(){requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})})}function he(e,t,o,n){e.classList.add("is-open"),t.classList.add("no-scroll"),o.style.display="none",n.style.display="flex"}function Me(e,t,o,n){e.classList.remove("is-open"),t.classList.remove("no-scroll"),o.style.display="flex",n.style.display="none"}function ke(e,t,o){e.key==="Escape"&&t.classList.contains("is-open")&&o()}function Le(e){e.target===r.productModal&&N()}function Ee(e){e.key==="Escape"&&N()}function Se(e){const t=r.productModal.querySelector('input[name="color"]:checked'),o=t?t.value:null;N(),ae(e,null,o)}function we(e,t){const o=e.target.closest(".modal-thumb");if(!o||!t)return;const n=t.src;t.src=o.src,o.src=n}function Be(e){e.key==="Escape"&&P()}function Ce(){P()}function Pe(e){e.target===r.backdropOrderModal&&P()}let l=null;function Ne(e=10){if(!(!r.feedbackSwiper||!r.feedbackCardList))return l&&(l.destroy(!0,!0),l=null),l=new H(r.feedbackSwiper,{modules:[U,W],slidesPerView:1,slidesPerGroup:1,spaceBetween:24,loop:!1,grabCursor:!0,allowTouchMove:!0,touchRatio:1,simulateTouch:!0,watchSlidesProgress:!0,navigation:{nextEl:r.feedbackNavNext,prevEl:r.feedbackNavPrev},pagination:{el:r.feedbackPaginationDots,clickable:!0,bulletElement:"li",bulletClass:"feedback-pagination-dot",bulletActiveClass:"active",type:"bullets",dynamicBullets:!1},breakpoints:{375:{slidesPerView:1,slidesPerGroup:1,spaceBetween:16},768:{slidesPerView:2,slidesPerGroup:1,spaceBetween:24},1200:{slidesPerView:3,slidesPerGroup:1,spaceBetween:24}},on:{init:function(){q()},slideChange:function(){q()},resize:function(){q()}}}),l}function q(){if(!l||!r.feedbackNavPrev||!r.feedbackNavNext)return;const e=l.isBeginning,t=l.isEnd;e?(r.feedbackNavPrev.setAttribute("disabled","true"),r.feedbackNavPrev.classList.add("disabled"),r.feedbackNavPrev.setAttribute("aria-disabled","true")):(r.feedbackNavPrev.removeAttribute("disabled"),r.feedbackNavPrev.classList.remove("disabled"),r.feedbackNavPrev.setAttribute("aria-disabled","false")),t?(r.feedbackNavNext.setAttribute("disabled","true"),r.feedbackNavNext.classList.add("disabled"),r.feedbackNavNext.setAttribute("aria-disabled","true")):(r.feedbackNavNext.removeAttribute("disabled"),r.feedbackNavNext.classList.remove("disabled"),r.feedbackNavNext.setAttribute("aria-disabled","false"))}async function Oe(){try{const t=(await Q({limit:x})).feedbacks||[];if(t.length===0){m("No feedbacks received from API");return}Ae(t),setTimeout(()=>{Ne(t.length)},50)}catch(e){g(e)}}async function qe(){if(!r.feedbackSwiper||!r.feedbackCardList||!r.feedbackNavPrev||!r.feedbackNavNext||!r.feedbackPaginationDots){m("Feedback section elements not found in DOM");return}await Oe()}function Fe(e){const t=e.rate??0,o=Z(t);return`
    <li class="swiper-slide feedback-card-item">
      <div class="feedback-rating" data-score="${o}" aria-label="Рейтинг ${o} з 5"></div>
      <p class="feedback-text">${e.descr||""}</p>
      <p class="feedback-author">${e.name||""}</p>
    </li>
  `}function Ae(e){if(!r.feedbackCardList)return;const t=e.map(n=>Fe(n)).join("");r.feedbackCardList.innerHTML=t,r.feedbackCardList.querySelectorAll(".feedback-rating").forEach(n=>{const a=Number(n.dataset.score)||0;n.innerHTML="",new R(n,{readOnly:!0,starType:"i",number:5,score:a,half:!0,halfShow:!0,starOn:"feedback-star-on",starOff:"feedback-star-off",starHalf:"feedback-star-half",space:!1}).init()})}window.addEventListener("load",ve);document.addEventListener("DOMContentLoaded",()=>{me(),qe(),Te(),$e(),Ie(),xe(),We(),ze()});function Ie(){r.categories&&!r.categories.dataset.bound&&(r.categories.addEventListener("click",be),r.categories.dataset.bound="1")}function xe(){r.loadMoreBtn&&!r.loadMoreBtn.dataset.bound&&(r.loadMoreBtn.addEventListener("click",ge),r.loadMoreBtn.dataset.bound="1")}function $e(){const e=r.products||document.getElementById("products");e&&e.dataset.boundModal!=="1"&&(e.addEventListener("click",ye),e.dataset.boundModal="1")}function Te(){const e=r.burgerMenuOpenBtn,t=r.burgerMenu,o=r.burgerMenuHeaderNav,n=r.burgerMenuHeaderButton,a=r.body;if(!e||!t||!o){console.warn("Не знайдено елементи меню або хедеру");return}const s=document.createElement("button");s.classList.add("burger-menu-navbar-btn-close"),s.setAttribute("type","button"),s.setAttribute("data-navbar-close",""),s.innerHTML=`
    <svg class="burger-button-icon" width="32" height="32">
      <use href="/img/sprite.svg#x"></use>
    </svg>
  `,e.insertAdjacentElement("beforebegin",s);const c=()=>{Me(t,a,e,s)};e.addEventListener("click",()=>{he(t,a,e,s)}),s.addEventListener("click",c),n?.addEventListener("click",c),t.querySelectorAll(".nav-link").forEach(O=>O.addEventListener("click",c)),document.addEventListener("keydown",O=>{ke(O,t,c)}),s.style.display="none"}let v=null,h=null;function De(e,t){const{btnClose:o,orderBtn:n,dialog:a,thumbsWrap:s,mainImg:c}=e;o&&(o.onclick=N),h=Le,r.productModal.addEventListener("mousedown",h),v=Ee,document.addEventListener("keydown",v),n&&(n.onclick=()=>Se(t)),s&&!s.dataset.bound&&(s.addEventListener("click",d=>{we(d,c)}),s.dataset.bound="1"),a&&(a.setAttribute("tabindex","-1"),a.focus({preventScroll:!0}))}function Re(){v&&(document.removeEventListener("keydown",v),v=null),h&&(r.productModal.removeEventListener("mousedown",h),h=null)}let M=null;function He(){M=Be,window.addEventListener("keydown",M)}function Ue(){M&&(window.removeEventListener("keydown",M),M=null)}function We(){r.closeOrderBtn?.addEventListener("click",Ce),r.backdropOrderModal?.addEventListener("mousedown",Pe)}function ze(){oe(),r.orderForm?.addEventListener("submit",ne)}
//# sourceMappingURL=index.js.map
